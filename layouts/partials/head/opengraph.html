{{- /*
  Open Graph and Twitter Cards template
  Generates meta tags for social sharing on Facebook, Twitter, etc.
*/ -}}
{{- $title := or .Params.title .Title .Site.Title -}}
{{- $description := or .Params.description .Summary .Site.Params.description | plainify -}}
{{- $image := or .Params.image .Site.Params.seo.social_image "" -}}
{{- $permalink := .Permalink -}}
{{- $siteName := .Site.Title -}}
{{- $locale := replace .Site.LanguageCode "-" "_" | default "en_US" -}}
{{- $twitterSite := .Site.Params.seo.twitter_site | default "" -}}
{{- $twitterCreator := or .Params.twitter_handle .Site.Params.seo.default_author .Site.Params.author | default "" -}}

{{- /* Article specific */ -}}
{{- $publishedTime := "" -}}
{{- $modifiedTime := "" -}}
{{- $author := "" -}}
{{- $tags := slice -}}
{{- if .IsPage -}}
  {{- $publishedTime = .Date.Format "2006-01-02T15:04:05-07:00" -}}
  {{- $modifiedTime = .Lastmod.Format "2006-01-02T15:04:05-07:00" -}}
  {{- $author = or .Params.author .Site.Params.seo.default_author .Site.Params.author -}}
  {{- $tags = .Params.tags | default slice -}}
{{- end -}}

<!-- Open Graph -->
<meta property="og:title" content="{{ $title }}" />
<meta property="og:description" content="{{ $description }}" />
{{- if $image }}
<meta property="og:image" content="{{ $image | absURL }}" />
{{- end }}
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}" />
<meta property="og:url" content="{{ $permalink }}" />
<meta property="og:site_name" content="{{ $siteName }}" />
<meta property="og:locale" content="{{ $locale }}" />

{{- if .IsPage }}
<meta property="article:published_time" content="{{ $publishedTime }}" />
<meta property="article:modified_time" content="{{ $modifiedTime }}" />
{{- if $author }}
<meta property="article:author" content="{{ $author }}" />
{{- end }}
{{- range $tags }}
<meta property="article:tag" content="{{ . }}" />
{{- end }}
{{- end }}

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image" />
{{- if $twitterSite }}
<meta name="twitter:site" content="{{ $twitterSite }}" />
{{- end }}
{{- if $twitterCreator }}
<meta name="twitter:creator" content="{{ $twitterCreator }}" />
{{- end }}
<meta name="twitter:title" content="{{ $title }}" />
<meta name="twitter:description" content="{{ $description }}" />
{{- if $image }}
<meta name="twitter:image" content="{{ $image | absURL }}" />
{{- end }}
